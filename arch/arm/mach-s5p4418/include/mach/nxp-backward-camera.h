#ifndef _NXP_BACKWARD_CAMERA_H_
#define _NXP_BACKWARD_CAMERA_H_ __FILE__

#define END_MARKER {0xff, 0xff}

struct reg_val {
    uint8_t reg;
    uint8_t val;
};

struct nxp_backward_camera_platform_data {
    int backgear_gpio_num;
    bool active_high; /* if turn on backgear and gpio goto high, this field is true */
    int vip_module_num;
    int mlc_module_num;

    // for suspend/resume
    // sensor
    int i2c_bus;
    int chip_addr;
    int clk_rate;
    struct reg_val *reg_val;
    int (*power_enable)(bool);
    int (*set_clock)(int);
    void (*setup_io)(void);

    // vip
    int port;
    bool external_sync;
    bool is_mipi;
    u32  h_active;
    u32  h_frontporch;
    u32  h_syncwidth;
    u32  h_backporch;
    u32  v_active;
    u32  v_frontporch;
    u32  v_syncwidth;
    u32  v_backporch;
    u32  data_order;
    bool interlace;

    u32 lu_addr;
    u32 cb_addr;
    u32 cr_addr;
    u32 lu_stride;
    u32 cb_stride;
    u32 cr_stride;

    u32 rgb_format;
    u32 width;
    u32 height;
    u32 rgb_addr;

	void (*draw_rgb_overlay)(struct nxp_backward_camera_platform_data *, void *);
};

static struct reg_val _sensor_init_data[] =
{
	{0xfd,0x00},
	{0x1b,0x1a},//maximum drv ability
	{0x0e,0x01},
	{0x0f,0x2f},
	{0x10,0x2e},
	{0x11,0x00},
	{0x12,0x4f},
	{0x14,0x40},//20
	{0x16,0x02},
	{0x17,0x10},
	{0x1a,0x1f},
	{0x1e,0x81},
	{0x21,0x00},
	{0x22,0x1b},
	{0x25,0x10},
	{0x26,0x25},
	{0x27,0x6d},
	{0x2c,0x23},//31 Ronlus remove balck dot0x45},
	{0x2d,0x75},
	{0x2e,0x38},//sxga 0x18
    // psw0523 fix
#ifndef CONFIG_VIDEO_SP2518_FIXED_FRAMERATE
	{0x31,0x10},//mirror upside down
    // fix for 30frame
	/* {0x31,0x00},//mirror upside down */
#else
	{0x31,0x18},//mirror upside down
#endif // CONFIG_VIDEO_SP2518_FIXED_FRAMERATE
    // end psw0523
    // psw0523 add for 656
    /* {0x36, 0x1f}, // bit1: ccir656 output enable */
    // end psw0523
	{0x44,0x03},
	{0x6f,0x00},
	{0xa0,0x04},
	{0x5f,0x01},
	{0x32,0x00},
	{0xfd,0x01},
	{0x2c,0x00},
	{0x2d,0x00},
	{0xfd,0x00},
	{0xfb,0x83},
	{0xf4,0x09},
	//Pregain
	{0xfd,0x01},
	{0xc6,0x90},
	{0xc7,0x90},
	{0xc8,0x90},
	{0xc9,0x90},
	//blacklevel
	{0xfd,0x00},
	{0x65,0x08},
	{0x66,0x08},
	{0x67,0x08},
	{0x68,0x08},

	//bpc
	{0x46,0xff},
	//rpc
	{0xfd,0x00},
	{0xe0,0x6c},
	{0xe1,0x54},
	{0xe2,0x48},
	{0xe3,0x40},
	{0xe4,0x40},
	{0xe5,0x3e},
	{0xe6,0x3e},
	{0xe8,0x3a},
	{0xe9,0x3a},
	{0xea,0x3a},
	{0xeb,0x38},
	{0xf5,0x38},
	{0xf6,0x38},
	{0xfd,0x01},
	{0x94,0xcC},//f8 C0
	{0x95,0x38},
	{0x9c,0x74},//6C
	{0x9d,0x38},
#ifndef CONFIG_VIDEO_SP2518_FIXED_FRAMERATE
	/*24*3pll 8~13fps 50hz*/
	{0xfd , 0x00},
	{0x03 , 0x03},
	{0x04 , 0xf6},
	{0x05 , 0x00},
	{0x06 , 0x00},
	{0x07 , 0x00},
	{0x08 , 0x00},
	{0x09 , 0x00},
	{0x0a , 0x8b},
	{0x2f , 0x00},
	{0x30 , 0x08},
	{0xf0 , 0xa9},
	{0xf1 , 0x00},
	{0xfd , 0x01},
	{0x90 , 0x0c},
	{0x92 , 0x01},
	{0x98 , 0xa9},
	{0x99 , 0x00},
	{0x9a , 0x01},
	{0x9b , 0x00},
	//Status
	{0xfd , 0x01},
	{0xce , 0xec},
	{0xcf , 0x07},
	{0xd0 , 0xec},
	{0xd1 , 0x07},
	{0xd7 , 0xab},
	{0xd8 , 0x00},
	{0xd9 , 0xaf},
	{0xda , 0x00},
	{0xfd , 0x00},


	{0xfd , 0x00},
	{0x03 , 0x07},
	{0x04 , 0x9e},
	{0x05 , 0x00},
	{0x06 , 0x00},
	{0x07 , 0x00},
	{0x08 , 0x00},
	{0x09 , 0x00},
	{0x0a , 0xd4},
	{0x2f , 0x00},
	{0x30 , 0x0c},
	{0xf0 , 0x45},
	{0xf1 , 0x01},
	{0xfd , 0x01},
	{0x90 , 0x04},
	{0x92 , 0x01},
	{0x98 , 0x45},
	{0x99 , 0x01},
	{0x9a , 0x01},
	{0x9b , 0x00},
	//Status
	{0xfd , 0x01},
	{0xce , 0x14},
	{0xcf , 0x05},
	{0xd0 , 0x14},
	{0xd1 , 0x05},
	{0xd7 , 0x41},
	{0xd8 , 0x01},
	{0xd9 , 0x45},
	{0xda , 0x01},
	{0xfd , 0x00},
#else
    /* 24M Fixed 10frame */
	{0xfd , 0x00},
	{0x03 , 0x03},
	{0x04 , 0x0C},
	{0x05 , 0x00},
	{0x06 , 0x00},
	{0x07 , 0x00},
	{0x08 , 0x00},
	{0x09 , 0x00},
	{0x0a , 0xE4},
	{0x2f , 0x00},
	{0x30 , 0x11},
	{0xf0 , 0x82},
	{0xf1 , 0x00},
	{0xfd , 0x01},
	{0x90 , 0x0A},
	{0x92 , 0x01},
	{0x98 , 0x82},
	{0x99 , 0x01},
	{0x9a , 0x01},
	{0x9b , 0x00},
	//Status
	{0xfd , 0x01},
	{0xce , 0x14},
	{0xcf , 0x05},
	{0xd0 , 0x14},
	{0xd1 , 0x05},
	{0xd7 , 0x7E},
	{0xd8 , 0x00},
	{0xd9 , 0x82},
	{0xda , 0x00},
	{0xfd , 0x00},
#endif /* CONFIG_VIDEO_SP2518_FIXED_FRAMERATE */

	{0xfd,0x01},
	{0xca,0x30},//mean dummy2low
	{0xcb,0x50},//mean low2dummy
	{0xcc,0xc0},//f8,rpc low
	{0xcd,0xc0},//rpc dummy
	{0xd5,0x80},//mean normal2dummy
	{0xd6,0x90},//mean dummy2normal
	{0xfd,0x00},
	//lens shading for 舜泰979C-171A\181A
	{0xfd,0x00},
	{0xa1,0x20},
	{0xa2,0x20},
	{0xa3,0x20},
	{0xa4,0xff},
	{0xa5,0x80},
	{0xa6,0x80},
	{0xfd,0x01},
	{0x64,0x1e},//28
	{0x65,0x1c},//25
	{0x66,0x1c},//2a
	{0x67,0x16},//25
	{0x68,0x1c},//25
	{0x69,0x1c},//29
	{0x6a,0x1a},//28
	{0x6b,0x16},//20
	{0x6c,0x1a},//22
	{0x6d,0x1a},//22
	{0x6e,0x1a},//22
	{0x6f,0x16},//1c
	{0xb8,0x04},//0a
	{0xb9,0x13},//0a
	{0xba,0x00},//23
	{0xbb,0x03},//14
	{0xbc,0x03},//08
	{0xbd,0x11},//08
	{0xbe,0x00},//12
	{0xbf,0x02},//00
	{0xc0,0x04},//05
	{0xc1,0x0e},//05
	{0xc2,0x00},//18
	{0xc3,0x05},//08
	//raw filter
	{0xfd,0x01},
	{0xde,0x0f},
	{0xfd,0x00},
	{0x57,0x08},//raw_dif_thr
	{0x58,0x08},//a
	{0x56,0x08},//a
	{0x59,0x10},
	//R\B通?兰?平??
	{0x5a,0xa0},//raw_rb_fac_outdoor
	{0xc4,0xa0},//60raw_rb_fac_indoor
	{0x43,0xa0},//40raw_rb_fac_dummy
	{0xad,0x40},//raw_rb_fac_low
	//Gr??Gb 通???诓?平??
	{0x4f,0xa0},//raw_gf_fac_outdoor
	{0xc3,0xa0},//60raw_gf_fac_indoor
	{0x3f,0xa0},//40raw_gf_fac_dummy
	{0x42,0x40},//raw_gf_fac_low
	{0xc2,0x15},
	//Gr??Gb通?兰?平??
	{0xb6,0x80},//raw_gflt_fac_outdoor
	{0xb7,0x80},//60raw_gflt_fac_normal
	{0xb8,0x40},//40raw_gflt_fac_dummy
	{0xb9,0x20},//raw_gflt_fac_low
	//Gr??Gb通????值
	{0xfd,0x01},
	{0x50,0x0c},//raw_grgb_thr
	{0x51,0x0c},
	{0x52,0x10},
	{0x53,0x10},
	{0xfd,0x00},
	// awb1
	{0xfd,0x01},
	{0x11,0x10},
	{0x12,0x1f},
	{0x16,0x1c},
	{0x18,0x00},
	{0x19,0x00},
	{0x1b,0x96},
	{0x1a,0x9a},//95
	{0x1e,0x2f},
	{0x1f,0x29},
	{0x20,0xff},
	{0x22,0xff},
	{0x28,0xce},
	{0x29,0x8a},
	{0xfd,0x00},
	{0xe7,0x03},
	{0xe7,0x00},
	{0xfd,0x01},
	{0x2a,0xf0},
	{0x2b,0x10},
	{0x2e,0x04},
	{0x2f,0x18},
	{0x21,0x60},
	{0x23,0x60},
	{0x8b,0xab},
	{0x8f,0x12},
	//awb2
	{0xfd,0x01},
	{0x1a,0x80},
	{0x1b,0x80},
	{0x43,0x80},
	 //outdoor
    {0x00,0xd4},
    {0x01,0xb0},
    {0x02,0x90},
    {0x03,0x78},
	//d65
	{0x35,0xd6},//d6,b0
	{0x36,0xf0},//f0,d1,e9
	{0x37,0x7a},//8a,70
	{0x38,0x9a},//dc,9a,af
	//indoor
	{0x39,0xab},
	{0x3a,0xca},
	{0x3b,0xa3},
	{0x3c,0xc1},
	//f
	{0x31,0x82},//7d
	{0x32,0xa5},//a0,74
	{0x33,0xd6},//d2
	{0x34,0xec},//e8
	{0x3d,0xa5},//a7,88
	{0x3e,0xc2},//be,bb
	{0x3f,0xa7},//b3,ad
	{0x40,0xc5},//c5,d0
	//Color Correction
	{0xfd,0x01},
	{0x1c,0xc0},
	{0x1d,0x95},
	{0xa0,0xa6},//b8
	{0xa1,0xda},//,d5
	{0xa2,0x00},//,f2
	{0xa3,0x06},//,e8
	{0xa4,0xb2},//,95
	{0xa5,0xc7},//,03
	{0xa6,0x00},//,f2
	{0xa7,0xce},//,c4
	{0xa8,0xb2},//,ca
	{0xa9,0x0c},//,3c
	{0xaa,0x30},//,03
	{0xab,0x0c},//,0f
	{0xac,0xc0},//b8
	{0xad,0xc0},//d5
	{0xae,0x00},//f2
	{0xaf,0xf2},//e8
	{0xb0,0xa6},//95
	{0xb1,0xe8},//03
	{0xb2,0x00},//f2
	{0xb3,0xe7},//c4
	{0xb4,0x99},//ca
	{0xb5,0x0c},//3c
	{0xb6,0x33},//03
	{0xb7,0x0c},//0f
	//Saturation
	{0xfd,0x00},
	{0xbf,0x01},
	{0xbe,0xbb},
	{0xc0,0xb0},
	{0xc1,0xf0},
	{0xd3,0x77},
	{0xd4,0x77},
	{0xd6,0x77},
	{0xd7,0x77},
	{0xd8,0x77},
	{0xd9,0x77},
	{0xda,0x77},
	{0xdb,0x77},
	//uv_dif
	{0xfd,0x00},
	{0xf3,0x03},
	{0xb0,0x00},
	{0xb1,0x23},
	//gamma1
	{0xfd,0x00},//
	{0x8b,0x0 },//0 ,0
	{0x8c,0xA },//14,A
	{0x8d,0x13},//24,13
	{0x8e,0x25},//3a,25
	{0x8f,0x43},//59,43
	{0x90,0x5D},//6f,5D
	{0x91,0x74},//84,74
	{0x92,0x88},//95,88
	{0x93,0x9A},//a3,9A
	{0x94,0xA9},//b1,A9
	{0x95,0xB5},//be,B5
	{0x96,0xC0},//c7,C0
	{0x97,0xCA},//d1,CA
	{0x98,0xD4},//d9,D4
	{0x99,0xDD},//e1,DD
	{0x9a,0xE6},//e9,E6
	{0x9b,0xEF},//f1,EF
	{0xfd,0x01},//01,01
	{0x8d,0xF7},//f9,F7
	{0x8e,0xFF},//ff,FF
	//gamma2
	{0xfd,0x00},//
	{0x78,0x0 },//0
	{0x79,0xA },//14
	{0x7a,0x13},//24
	{0x7b,0x25},//3a
	{0x7c,0x43},//59
	{0x7d,0x5D},//6f
	{0x7e,0x74},//84
	{0x7f,0x88},//95
	{0x80,0x9A},//a3
	{0x81,0xA9},//b1
	{0x82,0xB5},//be
	{0x83,0xC0},//c7
	{0x84,0xCA},//d1
	{0x85,0xD4},//d9
	{0x86,0xDD},//e1
	{0x87,0xE6},//e9
	{0x88,0xEF},//f1
	{0x89,0xF7},//f9
	{0x8a,0xFF},//ff
      /*//???吖??群?
 //gamma1
	{0xfd,0x00},
	{0x8b,0x00},
	{0x8c,0x14},
	{0x8d,0x24},
	{0x8e,0x3A},
	{0x8f,0x59},
	{0x90,0x70},
	{0x91,0x85},
	{0x92,0x96},
	{0x93,0xA6},
	{0x94,0xB3},
	{0x95,0xBE},
	{0x96,0xC9},
	{0x97,0xD2},
	{0x98,0xDB},
	{0x99,0xE3},
	{0x9a,0xEB},
	{0x9b,0xF2},
	{0xfd,0x01},
	{0x8d,0xF9},
	{0x8e,0xFF},
//gamma2
	{0xfd,0x00},
	{0x78,0x00},
	{0x79,0x14},
	{0x7a,0x24},
	{0x7b,0x3A},
	{0x7c,0x59},
	{0x7d,0x70},
	{0x7e,0x85},
	{0x7f,0x96},
	{0x80,0xA6},
	{0x81,0xB3},
	{0x82,0xBE},
	{0x83,0xC9},
	{0x84,0xD2},
	{0x85,0xDB},
	{0x86,0xE3},
	{0x87,0xEB},
	{0x88,0xF2},
	{0x89,0xF9},
	{0x8a,0xFF},
*/
	//gamma_ae
	{0xfd,0x01},
	{0x96,0x46},
	{0x97,0x14},
	{0x9f,0x06},
	//HEQ
	{0xfd,0x00},//
	{0xdd,0x80},//
	{0xde,0x95},//a0
	{0xdf,0x80},//
	//Ytarget
	{0xfd,0x00},//
	{0xec,0x70},//6a
	{0xed,0x86},//7c
	{0xee,0x70},//65
	{0xef,0x86},//78
	{0xf7,0x80},//78
	{0xf8,0x74},//6e
	{0xf9,0x80},//74
	{0xfa,0x74},//6a
	//sharpen
	{0xfd,0x01},
	{0xdf,0x0f},
	{0xe5,0x10},
	{0xe7,0x10},
	{0xe8,0x20},
	{0xec,0x20},
	{0xe9,0x20},
	{0xed,0x20},
	{0xea,0x10},
	{0xef,0x10},
	{0xeb,0x10},
	{0xf0,0x10},
	//,gw
	{0xfd,0x01},//
	{0x70,0x76},//
	{0x7b,0x40},//
	{0x81,0x30},//
	//,Y_offset
	{0xfd,0x00},
	{0xb2,0x10},
	{0xb3,0x1f},
	{0xb4,0x30},
	{0xb5,0x50},
	//,CNR
	{0xfd,0x00},
	{0x5b,0x20},
	{0x61,0x80},
	{0x77,0x80},
	{0xca,0x80},
	//,YNR
	{0xab,0x00},
	{0xac,0x02},
	{0xae,0x08},
	{0xaf,0x20},
	{0xfd,0x00},
	{0x31,0x10},
	{0x32,0x0d},
	{0x33,0xcf},//ef
	{0x34,0x7f},//3f
	{0xe7,0x03},
	{0xe7,0x00},

    // psw0523 test
#if 0
    {0xfd, 0x00},
    {0x36, 0x1f}, // bit1: ccir656 output enable
    {0x4b, 0x00},
    {0x4c, 0x00},
    {0x47, 0x00},
    {0x48, 0x00},
    {0xfd, 0x01},
    {0x06, 0x00},
    {0x07, 0x40},
    {0x08, 0x00},
    {0x09, 0x40},
    {0x0a, 0x02},
    {0x0b, 0x58},
    {0x0c, 0x03},
    {0x0d, 0x20},
    {0x0e, 0x21},
    {0xfd, 0x00},
#else
		//[keun]win reg 800x600
	{0xfd, 0x00},
    {0x36, 0x1f}, // bit1: ccir656 output enable
    {0x47, 0x00},
    {0x48, 0x00},
    {0x49, 0x04},
    {0x4a, 0xb0},
    {0x4b, 0x00},
    {0x4c, 0x00},
    {0x4d, 0x06},
    {0x4e, 0x40},
    {0xfd, 0x01},
    {0x06, 0x00},
    {0x07, 0x40},
    {0x08, 0x00},
    {0x09, 0x40},
    {0x0a, 0x02},
    {0x0b, 0x58},
    {0x0c, 0x03},
    {0x0d, 0x20},
    {0x0e, 0x21},
    {0xfd, 0x00},

//[keun]set bus foramt - sp2518_fmt_yuv422_yuyv
		//ycbycr
    {0xfd,0x00},
    {0x35,0x40},		
#endif

    END_MARKER
};


#endif
